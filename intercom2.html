<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Intercom Integration Test Page</title>

  <!-- Segment Snippet -->
  <script>
    !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="BFBfwkVSseE8wWFP6BtETpJJ4hu7SKS0";;analytics.SNIPPET_VERSION="5.2.0";
    analytics.load("BFBfwkVSseE8wWFP6BtETpJJ4hu7SKS0");
    analytics.page();
    }}();
  </script>
</head>
<body>
  <h1>Intercom Integration Test Page</h1>
  <p>This is a sample page for testing Intercom integration via Segment.</p>

  <!-- Chat Button with SVG -->
  <div class="uala-chat-support css-1jspyti">
    <span class="Icon css-1xl7c5n" type="chat" color="blue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17">
        <path fill-rule="evenodd" d="M4.40387975,8.70912015 C3.66955841,8.70912015 3.07145009,8.11872282 3.07145009,7.39262525 C3.07145009,6.66652767 3.66955841,6.07613034 4.40387975,6.07613034 C5.1382011,6.07613034 5.73528526,6.66652767 5.73528526,7.39262525 C5.73528526,8.11872282 5.1382011,8.70912015 4.40387975,8.70912015 Z M8.50051208,8.70912015 C7.76619073,8.70912015 7.16910657,8.11872282 7.16910657,7.39262525 C7.16910657,6.66652767 7.76619073,6.07613034 8.50051208,6.07613034 C9.23483342,6.07613034 9.83191759,6.66652767 9.83191759,7.39262525 C9.83191759,8.11872282 9.23483342,8.70912015 8.50051208,8.70912015 Z M12.5971444,8.70912015 C11.8628231,8.70912015 11.2657389,8.11872282 11.2657389,7.39262525 C11.2657389,6.66652767 11.8628231,6.07613034 12.5971444,6.07613034 C13.3314658,6.07613034 13.9285499,6.66652767 13.9285499,7.39262525 C13.9285499,8.11872282 13.3314658,8.70912015 12.5971444,8.70912015 Z"></path>
      </svg>
    </span>
  </div>

  <!-- Add Button Dynamically -->
  <button id="add-new-button" style="background-color: orange; font-weight: 900;">Add another Chat Button</button>

  <script>
    // Dynamically add a new chat button (simulate SPA behavior)
    document.getElementById('add-new-button').addEventListener('click', () => {
      const newButton = document.createElement('div');
      newButton.className = 'uala-chat-support';
      newButton.innerHTML = '<span class="Icon">Dynamic Chat</span>';
      document.body.appendChild(newButton);
    });

    // Add click listener to chat buttons (simulate Intercom trigger)
    document.body.addEventListener('click', (event) => {
      if (event.target.closest('.uala-chat-support')) {
        console.log('Chat button clicked!');
        // Simulate Intercom('show') or other trigger here
        Intercom('show');
      }
    });
  </script>
</body>
</html>
